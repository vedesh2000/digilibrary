<h2 class="page-header">Edit Author</h2>
<form action="/files/authors/<%= author.id %>?_method=PUT" method="POST">
    <%- include('_form_fields') %>
    <div class="form-row form-row-end">
        <a class="btn btn-danger" id="cancelButton">Cancel</a>
        <button class="btn btn-primary" type="submit" id="saveButton" disabled>Update</button>
    </div>
</form>

<script>
    // Get the initial value of the authorName input field
    var initialAuthorName = document.getElementById('authorName').value;

    // Add an event listener to the input field to enable the save button when the user makes changes
    document.getElementById('authorName').addEventListener('input', function() {
        var currentAuthorName = this.value;
        document.getElementById('saveButton').disabled = currentAuthorName === initialAuthorName || currentAuthorName.trim() === '';
    });

    // Add an event listener to the cancel button to display the alert when clicked
    document.getElementById('cancelButton').addEventListener('click', function() {
        var currentAuthorName = document.getElementById('authorName').value;
        if (currentAuthorName !== initialAuthorName) {
            var shouldCancel = confirm('Are you sure you want to cancel? Any unsaved changes will be lost.');
            if (shouldCancel) {
                window.location.href = '/files/authors/<%= author.id %>';
            }
        }
        else{
            window.location.href = '/files/authors/<%= author.id %>';
        }
    });
</script>
